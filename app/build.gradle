/*
 Copyright (c) 2010 - 2022 Marvin Horter.
 All rights reserved. This program and the accompanying materials
 are made available under the terms of the GNU Public License v2.0
 which accompanies this distribution, and is available at
 http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
 */

import com.mikepenz.aboutlibraries.plugin.DuplicateMode

plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'com.mikepenz.aboutlibraries.plugin' // has to be applied AFTER android
    id 'org.owasp.dependencycheck'
}

aboutLibraries {
    duplicationMode = DuplicateMode.MERGE
    includePlatform = false
    prettyPrint = true
}

android {
    namespace 'com.marv42.ebt.newnote'

    defaultConfig {
        applicationId 'com.marv42.ebt.newnote'
        versionCode 7300
        versionName "0.73.0"
        minSdkVersion 31
        compileSdk rootProject.ext.sdkVersion
        targetSdkVersion rootProject.ext.sdkVersion
        multiDexEnabled true
    }

    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
        }
        debug {
            debuggable true
            minifyEnabled false
        }
    }

    flavorDimensions = ['ocrServiceKey']
    productFlavors {
        withKey {
            dimension 'ocrServiceKey'
            versionNameSuffix '-withKey'
        }
        withoutKey {
            dimension 'ocrServiceKey'
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    buildFeatures {
        viewBinding true
    }

    configurations.configureEach {
        resolutionStrategy.force "com.google.code.findbugs:jsr305:3.0.2"
    }

    lint {
        disable 'MissingTranslation'
    }
}

allprojects {
    gradle.projectsEvaluated {
        tasks.withType(JavaCompile).tap {
            configureEach {
                options.compilerArgs += ["-Xlint:deprecation"]
                options.compilerArgs += ["-Xlint:unchecked"]
            }
        }
    }
}

dependencies {
    def acraVersion = '5.11.3'
    def daggerVersion = '2.51'
//    def espressoVersion = '3.3.0'

    implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.8.0"
    implementation "ch.acra:acra-mail:$acraVersion"
    implementation "ch.acra:acra-toast:$acraVersion"
    implementation "androidx.appcompat:appcompat:1.6.1"
    implementation "androidx.cardview:cardview:1.0.0"
    implementation "androidx.exifinterface:exifinterface:1.3.7"
    implementation "androidx.fragment:fragment-ktx:1.6.2"
//    implementation "androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycleVersion"
//    implementation "androidx.lifecycle:lifecycle-extensions:$lifecycleVersion"
    implementation "androidx.preference:preference-ktx:1.2.1"
    implementation "androidx.recyclerview:recyclerview:1.3.2"
    implementation "androidx.security:security-crypto:1.1.0-alpha06"
    implementation "com.android.support:design:28.0.0"
    implementation "com.google.android.material:material:1.11.0"
    implementation "com.google.code.gson:gson:2.10.1"
//    implementation "com.google.dagger:dagger-android:$daggerVersion"
    implementation "com.google.dagger:dagger-android-support:$daggerVersion"
    annotationProcessor "com.google.dagger:dagger-compiler:$daggerVersion"
    annotationProcessor "com.google.dagger:dagger-android-processor:$daggerVersion"
    implementation "com.squareup.okhttp3:okhttp:5.0.0-alpha.10"
    implementation "com.squareup.picasso:picasso:2.8"
    implementation "com.mikepenz:aboutlibraries:${rootProject.ext.aboutLibrariesVersion}"
//    TODO implementation "com.mikepenz:aboutlibraries-core:${rootProject.ext.aboutLibrariesVersion}"
//    implementation "com.mikepenz:aboutlibraries-compose:${rootProject.ext.aboutLibrariesVersion}"
    implementation "cz.adaptech.tesseract4android:tesseract4android-openmp:4.2.0"

//    androidTestImplementation "androidx.test.ext:junit:1.1.2"
//    androidTestImplementation "androidx.test.ext:junit:1.1.3"
//    androidTestImplementation "androidx.test:core:1.4.0"
//    androidTestImplementation "androidx.test:runner:1.4.0"
//    androidTestImplementation "androidx.test:rules:1.4.0"
//    androidTestImplementation "androidx.test.ext:truth:1.4.0"
//    androidTestImplementation "com.google.truth:truth:1.0.1"
//    androidTestImplementation "org.testng:testng:6.9.6"
//    androidTestImplementation "androidx.test.espresso:espresso-core:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso:espresso-contrib:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso:espresso-intents:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso:espresso-accessibility:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso:espresso-web:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso.idling:idling-concurrent:$espressoVersion"
//    androidTestImplementation "androidx.test.espresso:espresso-idling-resource:$espressoVersion"
}
